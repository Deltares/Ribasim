<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>changelog – Ribasim</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./known_issues.html" rel="next">
<link href="./index.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-0b1189524dc19e09ab363e9b4d3e2f65.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="assets/styles.css">
</head>

<body class="nav-sidebar floating nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="https://user-images.githubusercontent.com/4471859/224825908-bee7e044-bc6b-4561-8b08-5d330cce3ed5.png" alt="" class="navbar-logo light-content">
    <img src="https://user-images.githubusercontent.com/4471859/224825908-bee7e044-bc6b-4561-8b08-5d330cce3ed5.png" alt="" class="navbar-logo dark-content">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Ribasim</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Overview</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./getting-started/install.html"> 
<span class="menu-text">Getting started</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./guide/qgis.html"> 
<span class="menu-text">How-to guides</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./concept/concept.html"> 
<span class="menu-text">Concepts</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./reference/index.html"> 
<span class="menu-text">Reference</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./dev/index.html"> 
<span class="menu-text">Contributing</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/Deltares/Ribasim"> <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./changelog.html">Changelog</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Ribasim</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./changelog.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Changelog</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./known_issues.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Known issues</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contact.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Contact us</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#changelog" id="toc-changelog" class="nav-link active" data-scroll-target="#changelog"><span class="header-section-number">1</span> Changelog</a>
  <ul class="collapse">
  <li><a href="#unreleased" id="toc-unreleased" class="nav-link" data-scroll-target="#unreleased"><span class="header-section-number">1.1</span> [Unreleased]</a></li>
  <li><a href="#v2026.1.0-rc1---2025-12-23" id="toc-v2026.1.0-rc1---2025-12-23" class="nav-link" data-scroll-target="#v2026.1.0-rc1---2025-12-23"><span class="header-section-number">1.2</span> [v2026.1.0-rc1] - 2025-12-23</a>
  <ul class="collapse">
  <li><a href="#added" id="toc-added" class="nav-link" data-scroll-target="#added"><span class="header-section-number">1.2.1</span> Added</a></li>
  <li><a href="#changed" id="toc-changed" class="nav-link" data-scroll-target="#changed"><span class="header-section-number">1.2.2</span> Changed</a></li>
  <li><a href="#fixed" id="toc-fixed" class="nav-link" data-scroll-target="#fixed"><span class="header-section-number">1.2.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2025.6.0---2025-10-27" id="toc-v2025.6.0---2025-10-27" class="nav-link" data-scroll-target="#v2025.6.0---2025-10-27"><span class="header-section-number">1.3</span> [v2025.6.0] - 2025-10-27</a>
  <ul class="collapse">
  <li><a href="#added-1" id="toc-added-1" class="nav-link" data-scroll-target="#added-1"><span class="header-section-number">1.3.1</span> Added</a></li>
  <li><a href="#changed-1" id="toc-changed-1" class="nav-link" data-scroll-target="#changed-1"><span class="header-section-number">1.3.2</span> Changed</a></li>
  <li><a href="#fixed-1" id="toc-fixed-1" class="nav-link" data-scroll-target="#fixed-1"><span class="header-section-number">1.3.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2025.5.0---2025-09-09" id="toc-v2025.5.0---2025-09-09" class="nav-link" data-scroll-target="#v2025.5.0---2025-09-09"><span class="header-section-number">1.4</span> [v2025.5.0] - 2025-09-09</a>
  <ul class="collapse">
  <li><a href="#added-2" id="toc-added-2" class="nav-link" data-scroll-target="#added-2"><span class="header-section-number">1.4.1</span> Added</a></li>
  <li><a href="#changed-2" id="toc-changed-2" class="nav-link" data-scroll-target="#changed-2"><span class="header-section-number">1.4.2</span> Changed</a></li>
  <li><a href="#fixed-2" id="toc-fixed-2" class="nav-link" data-scroll-target="#fixed-2"><span class="header-section-number">1.4.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2025.4.0---2025-06-16" id="toc-v2025.4.0---2025-06-16" class="nav-link" data-scroll-target="#v2025.4.0---2025-06-16"><span class="header-section-number">1.5</span> [v2025.4.0] - 2025-06-16</a>
  <ul class="collapse">
  <li><a href="#added-3" id="toc-added-3" class="nav-link" data-scroll-target="#added-3"><span class="header-section-number">1.5.1</span> Added</a></li>
  <li><a href="#changed-3" id="toc-changed-3" class="nav-link" data-scroll-target="#changed-3"><span class="header-section-number">1.5.2</span> Changed</a></li>
  <li><a href="#fixed-3" id="toc-fixed-3" class="nav-link" data-scroll-target="#fixed-3"><span class="header-section-number">1.5.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2025.3.0---2025-04-14" id="toc-v2025.3.0---2025-04-14" class="nav-link" data-scroll-target="#v2025.3.0---2025-04-14"><span class="header-section-number">1.6</span> [v2025.3.0] - 2025-04-14</a>
  <ul class="collapse">
  <li><a href="#added-4" id="toc-added-4" class="nav-link" data-scroll-target="#added-4"><span class="header-section-number">1.6.1</span> Added</a></li>
  <li><a href="#changed-4" id="toc-changed-4" class="nav-link" data-scroll-target="#changed-4"><span class="header-section-number">1.6.2</span> Changed</a></li>
  </ul></li>
  <li><a href="#v2025.2.0---2025-03-10" id="toc-v2025.2.0---2025-03-10" class="nav-link" data-scroll-target="#v2025.2.0---2025-03-10"><span class="header-section-number">1.7</span> [v2025.2.0] - 2025-03-10</a>
  <ul class="collapse">
  <li><a href="#added-5" id="toc-added-5" class="nav-link" data-scroll-target="#added-5"><span class="header-section-number">1.7.1</span> Added</a></li>
  <li><a href="#changed-5" id="toc-changed-5" class="nav-link" data-scroll-target="#changed-5"><span class="header-section-number">1.7.2</span> Changed</a></li>
  <li><a href="#fixed-4" id="toc-fixed-4" class="nav-link" data-scroll-target="#fixed-4"><span class="header-section-number">1.7.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2025.1.0---2025-01-17" id="toc-v2025.1.0---2025-01-17" class="nav-link" data-scroll-target="#v2025.1.0---2025-01-17"><span class="header-section-number">1.8</span> [v2025.1.0] - 2025-01-17</a>
  <ul class="collapse">
  <li><a href="#added-6" id="toc-added-6" class="nav-link" data-scroll-target="#added-6"><span class="header-section-number">1.8.1</span> Added</a></li>
  <li><a href="#removed" id="toc-removed" class="nav-link" data-scroll-target="#removed"><span class="header-section-number">1.8.2</span> Removed</a></li>
  <li><a href="#changed-6" id="toc-changed-6" class="nav-link" data-scroll-target="#changed-6"><span class="header-section-number">1.8.3</span> Changed</a></li>
  <li><a href="#fixed-5" id="toc-fixed-5" class="nav-link" data-scroll-target="#fixed-5"><span class="header-section-number">1.8.4</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2024.11.0---2024-10-08" id="toc-v2024.11.0---2024-10-08" class="nav-link" data-scroll-target="#v2024.11.0---2024-10-08"><span class="header-section-number">1.9</span> [v2024.11.0] - 2024-10-08</a>
  <ul class="collapse">
  <li><a href="#added-7" id="toc-added-7" class="nav-link" data-scroll-target="#added-7"><span class="header-section-number">1.9.1</span> Added</a></li>
  <li><a href="#changed-7" id="toc-changed-7" class="nav-link" data-scroll-target="#changed-7"><span class="header-section-number">1.9.2</span> Changed</a></li>
  <li><a href="#fixed-6" id="toc-fixed-6" class="nav-link" data-scroll-target="#fixed-6"><span class="header-section-number">1.9.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2024.10.0---2024-07-23" id="toc-v2024.10.0---2024-07-23" class="nav-link" data-scroll-target="#v2024.10.0---2024-07-23"><span class="header-section-number">1.10</span> [v2024.10.0] - 2024-07-23</a>
  <ul class="collapse">
  <li><a href="#added-8" id="toc-added-8" class="nav-link" data-scroll-target="#added-8"><span class="header-section-number">1.10.1</span> Added</a></li>
  <li><a href="#changed-8" id="toc-changed-8" class="nav-link" data-scroll-target="#changed-8"><span class="header-section-number">1.10.2</span> Changed</a></li>
  <li><a href="#fixed-7" id="toc-fixed-7" class="nav-link" data-scroll-target="#fixed-7"><span class="header-section-number">1.10.3</span> Fixed</a></li>
  <li><a href="#removed-1" id="toc-removed-1" class="nav-link" data-scroll-target="#removed-1"><span class="header-section-number">1.10.4</span> Removed</a></li>
  </ul></li>
  <li><a href="#v2024.9.0---2024-06-20" id="toc-v2024.9.0---2024-06-20" class="nav-link" data-scroll-target="#v2024.9.0---2024-06-20"><span class="header-section-number">1.11</span> [v2024.9.0] - 2024-06-20</a>
  <ul class="collapse">
  <li><a href="#added-9" id="toc-added-9" class="nav-link" data-scroll-target="#added-9"><span class="header-section-number">1.11.1</span> Added</a></li>
  <li><a href="#changed-9" id="toc-changed-9" class="nav-link" data-scroll-target="#changed-9"><span class="header-section-number">1.11.2</span> Changed</a></li>
  <li><a href="#fixed-8" id="toc-fixed-8" class="nav-link" data-scroll-target="#fixed-8"><span class="header-section-number">1.11.3</span> Fixed</a></li>
  </ul></li>
  <li><a href="#v2024.8.0---2024-05-14" id="toc-v2024.8.0---2024-05-14" class="nav-link" data-scroll-target="#v2024.8.0---2024-05-14"><span class="header-section-number">1.12</span> [v2024.8.0] - 2024-05-14</a>
  <ul class="collapse">
  <li><a href="#added-10" id="toc-added-10" class="nav-link" data-scroll-target="#added-10"><span class="header-section-number">1.12.1</span> Added</a></li>
  <li><a href="#changed-10" id="toc-changed-10" class="nav-link" data-scroll-target="#changed-10"><span class="header-section-number">1.12.2</span> Changed</a></li>
  <li><a href="#fixed-9" id="toc-fixed-9" class="nav-link" data-scroll-target="#fixed-9"><span class="header-section-number">1.12.3</span> Fixed</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block"></header>




<section id="changelog" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Changelog</h1>
<p>All notable changes to this project will be documented in this file. The format is based on <a href="https://keepachangelog.com/en/1.1.0/">Keep a Changelog</a>,</p>
<section id="unreleased" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="unreleased"><span class="header-section-number">1.1</span> [Unreleased]</h2>
</section>
<section id="v2026.1.0-rc1---2025-12-23" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="v2026.1.0-rc1---2025-12-23"><span class="header-section-number">1.2</span> [v2026.1.0-rc1] - 2025-12-23</h2>
<p>This is the first pre-release running up to the stable v2026.1.0 release. It is a release candidate, and we recommend most users to stick with v2025.6.0 for now. We expect to make more breaking changes and add features before the final release. This release sees significant performance increases for the core as well as the QGIS plugin, which especially help large models. Route priority in allocation was added to steer the path taken by allocated water.</p>
<p><strong>Breaking changes</strong>: In the <code>Node</code> table, <code>source_priority</code> has been renamed to <code>route_priority</code>, and the optional <code>active</code> column was removed. Note that Ribasim Python will migrate existing models automatically, see also the new guide on <a href="https://ribasim.org/guide/updating-ribasim.html">updating Ribasim</a>. If nodes where set to inactive, they will have to be removed manually first. The <code>ribasim</code> executable was moved to the <code>bin</code> subfolder, so users may need to update their PATH or RIBASIM_EXE environment variables.</p>
<section id="added" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="added"><span class="header-section-number">1.2.1</span> Added</h3>
<ul>
<li>Add Windows installation script. <a href="https://github.com/Deltares/Ribasim/pull/2682">#2682</a></li>
<li>Add ResidenceTime tracer. <a href="https://github.com/Deltares/Ribasim/pull/2701">#2701</a></li>
<li>Add allocation route priorities. <a href="https://github.com/Deltares/Ribasim/pull/2731">#2731</a></li>
<li>Document control by allocation. <a href="https://github.com/Deltares/Ribasim/pull/2698">#2698</a></li>
<li>Document installing QGIS plugin from qgis.org. <a href="https://github.com/Deltares/Ribasim/pull/2687">#2687</a></li>
<li>Add diagram for physical-allocation interaction. <a href="https://github.com/Deltares/Ribasim/pull/2712">#2712</a></li>
<li>Add “getting started” section to documentation. <a href="https://github.com/Deltares/Ribasim/pull/2734">#2734</a></li>
<li>Expand saveat documentation for months and years. <a href="https://github.com/Deltares/Ribasim/pull/2709">#2709</a></li>
<li>Delwaq: Generate more modular inputs. <a href="https://github.com/Deltares/Ribasim/pull/2745">#2745</a></li>
<li>Log full configuration. <a href="https://github.com/Deltares/Ribasim/pull/2730">#2730</a></li>
<li>Add indexes to database for QGIS performance. <a href="https://github.com/Deltares/Ribasim/pull/2763">#2763</a></li>
<li>Improve database read performance of the core. <a href="https://github.com/Deltares/Ribasim/pull/2762">#2762</a></li>
<li>Let <code>run_ribasim</code> use <code>RIBASIM_EXE</code> if set. <a href="https://github.com/Deltares/Ribasim/pull/2783">#2783</a></li>
</ul>
</section>
<section id="changed" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="changed"><span class="header-section-number">1.2.2</span> Changed</h3>
<ul>
<li>Optimize Jacobian computation for large models. <a href="https://github.com/Deltares/Ribasim/pull/2624">#2624</a> <a href="https://github.com/Deltares/Ribasim/pull/2685">#2685</a></li>
<li>Allow replacing/deleting links. <a href="https://github.com/Deltares/Ribasim/pull/2733">#2733</a></li>
<li>Move <code>ribasim</code> executable to <code>bin</code> directory. <a href="https://github.com/Deltares/Ribasim/issues/2758">#2758</a></li>
<li>Remove feature where nodes can be inactive. <a href="https://github.com/Deltares/Ribasim/pull/2764">#2764</a></li>
<li>Make database reproducible by fixing timestamp. <a href="https://github.com/Deltares/Ribasim/pull/2765">#2765</a></li>
<li>By default, all nodes get a subnetwork ID of 1. <a href="https://github.com/Deltares/Ribasim/pull/2766">#2766</a></li>
<li>Deprecate <code>run_ribasim</code>’s <code>cli_path</code> for <code>ribasim_exe</code>. <a href="https://github.com/Deltares/Ribasim/pull/2783">#2783</a></li>
<li>Rename <code>source_priority</code> to <code>route_priority</code>. <a href="https://github.com/Deltares/Ribasim/pull/2768">#2768</a></li>
</ul>
</section>
<section id="fixed" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="fixed"><span class="header-section-number">1.2.3</span> Fixed</h3>
<ul>
<li>Fix “database disk image is malformed” error. <a href="https://github.com/Deltares/Ribasim/issues/2763">#2763</a></li>
<li>Fix timing of vertical forcing in allocation. <a href="https://github.com/Deltares/Ribasim/pull/2739">#2739</a></li>
<li>Fix reading uninitialized memory during allocation. <a href="https://github.com/Deltares/Ribasim/pull/2691">#2691</a></li>
<li>Validate Delwaq substance names. <a href="https://github.com/Deltares/Ribasim/pull/2744">#2744</a></li>
</ul>
</section>
</section>
<section id="v2025.6.0---2025-10-27" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="v2025.6.0---2025-10-27"><span class="header-section-number">1.3</span> [v2025.6.0] - 2025-10-27</h2>
<p>This release brings significant improvements to the QGIS plugin, allocation, and CLI latency. The QGIS plugin is now published in the QGIS plugin repository and has a simplified UI; you can drag a TOML to QGIS to open a model. The black screen in the iMOD plugin is fixed in the latest version of the iMOD plugin, and the Arrow errors on loading results are also fixed.</p>
<p>Iteratively working on a model in a Python session has become easier now that <code>model.&lt;node_type&gt;.add</code> can replace existing nodes, and <code>run_ribasim(toml_path)</code> shows you live progress in all editors.</p>
<p><strong>Breaking changes</strong>: There are two changes that shouldn’t be breaking but might affect some users nonetheless. The <code>input_dir</code> default has been changed to “input”. Python models now forbid any extra values in schema validation for stricter data integrity.</p>
<section id="added-1" class="level3" data-number="1.3.1">
<h3 data-number="1.3.1" class="anchored" data-anchor-id="added-1"><span class="header-section-number">1.3.1</span> Added</h3>
<ul>
<li>Add <code>run_ribasim(toml_path)</code> convenience function. <a href="https://github.com/Deltares/Ribasim/pull/2653">#2653</a></li>
<li>Allow replacing nodes with add API. <a href="https://github.com/Deltares/Ribasim/pull/2664">#2664</a></li>
<li>Flow communication between primary and secondary networks. <a href="https://github.com/Deltares/Ribasim/pull/2556">#2556</a></li>
<li>Read NetCDF files with demand_priority. <a href="https://github.com/Deltares/Ribasim/pull/2604">#2604</a></li>
<li>Make reduction factor thresholds configurable. <a href="https://github.com/Deltares/Ribasim/pull/2592">#2592</a> <a href="https://github.com/Deltares/Ribasim/pull/2681">#2681</a></li>
<li>QGIS: Add menu and dropdown interface. <a href="https://github.com/Deltares/Ribasim/pull/2634">#2634</a></li>
<li>Add docs on reloading model in QGIS plugin guide. <a href="https://github.com/Deltares/Ribasim/pull/2583">#2583</a></li>
<li>Document <code>pandas</code> requirement for QGIS plugin. <a href="https://github.com/Deltares/Ribasim/pull/2642">#2642</a></li>
</ul>
</section>
<section id="changed-1" class="level3" data-number="1.3.2">
<h3 data-number="1.3.2" class="anchored" data-anchor-id="changed-1"><span class="header-section-number">1.3.2</span> Changed</h3>
<ul>
<li>Set <code>input_dir</code> default to “input”. <a href="https://github.com/Deltares/Ribasim/pull/2641">#2641</a></li>
<li>Python: Forbid any extra values in (base)model for stricter validation. <a href="https://github.com/Deltares/Ribasim/pull/2595">#2595</a></li>
<li>Support Scientific Python SPEC 0 for broader compatibility. <a href="https://github.com/Deltares/Ribasim/pull/2630">#2630</a></li>
<li>QGIS: Always use GDAL instead of pyarrow for better stability. <a href="https://github.com/Deltares/Ribasim/pull/2591">#2591</a></li>
<li>Publish QGIS plugin. <a href="https://github.com/Deltares/Ribasim/pull/2654">#2654</a> <a href="https://github.com/Deltares/Ribasim/pull/2658">#2658</a></li>
<li>Improved build performance and compilation. <a href="https://github.com/Deltares/Ribasim/pull/2652">#2652</a></li>
</ul>
</section>
<section id="fixed-1" class="level3" data-number="1.3.3">
<h3 data-number="1.3.3" class="anchored" data-anchor-id="fixed-1"><span class="header-section-number">1.3.3</span> Fixed</h3>
<ul>
<li>Finalize progress bar. <a href="https://github.com/Deltares/Ribasim/pull/2665">#2665</a></li>
<li>Fix Junctions with subnetwork ID. <a href="https://github.com/Deltares/Ribasim/pull/2633">#2633</a></li>
<li>Delwaq: Restore correct water/mass balance with Junctions. <a href="https://github.com/Deltares/Ribasim/pull/2607">#2607</a></li>
<li>Delwaq: Limit endtime for partially failed Ribasim runs. <a href="https://github.com/Deltares/Ribasim/pull/2637">#2637</a></li>
<li>Delwaq: Improved performance of flow boundary concatenation. <a href="https://github.com/Deltares/Ribasim/pull/2597">#2597</a></li>
<li>Fix remaining DelWAQ netCDF warnings. <a href="https://github.com/Deltares/Ribasim/pull/2621">#2621</a></li>
<li>Fix DataInterpolations integration bug. <a href="https://github.com/Deltares/Ribasim/pull/2576">#2576</a></li>
<li>QGIS: Fix empty Arrow results. <a href="https://github.com/Deltares/Ribasim/pull/2585">#2585</a></li>
<li>Log clear error on decreasing area in <code>S(h)</code>. <a href="https://github.com/Deltares/Ribasim/pull/2600">#2600</a></li>
<li>QGIS: Faster results drawing. <a href="https://github.com/Deltares/Ribasim/pull/2618">#2618</a></li>
<li>QGIS: Fix crash on Reload Ribasim model. <a href="https://github.com/Deltares/Ribasim/pull/2661">#2661</a></li>
<li>Reset <code>ribasim_version</code> in <code>model_post_init</code>. <a href="https://github.com/Deltares/Ribasim/pull/2578">#2578</a></li>
<li>Convert Path to str with <code>.as_posix()</code> for cross-platform compatibility. <a href="https://github.com/Deltares/Ribasim/pull/2579">#2579</a></li>
<li>Support pydantic 2.12. <a href="https://github.com/Deltares/Ribasim/pull/2650">#2650</a></li>
</ul>
</section>
</section>
<section id="v2025.5.0---2025-09-09" class="level2" data-number="1.4">
<h2 data-number="1.4" class="anchored" data-anchor-id="v2025.5.0---2025-09-09"><span class="header-section-number">1.4</span> [v2025.5.0] - 2025-09-09</h2>
<p>This release focuses on improving allocation capabilities and performance optimizations. We linearize the optimization problem, and Pump and Outlets can now listen to allocation to set the flow rate. NetCDF output has been added, as well as experimental support for NetCDF input. DiscreteControl now supports an upper and lower threshold to model hysteresis. Editing models in QGIS is no longer supported; the plugin widget has been reduced one button. The <a href="https://ribasim.org/install.html#sec-install-python">Ribasim Python installation section</a> allows you to pick your favorite package manager. Lastly, Ribasim is now multithreaded!</p>
<p><strong>Breaking changes</strong>: In the <code>DiscreteControl / condition</code> table, <code>greater_than</code> has been renamed to <code>threshold_high</code>, and the optional <code>threshold_low</code> column was added. The <code>surface_runoff</code> column was added to <code>Basin / static</code> and <code>Basin / time</code>. Note that Ribasim Python will migrate existing models automatically, see also the new guide on <a href="https://ribasim.org/guide/updating-ribasim.html">updating Ribasim</a>.</p>
<section id="added-2" class="level3" data-number="1.4.1">
<h3 data-number="1.4.1" class="anchored" data-anchor-id="added-2"><span class="header-section-number">1.4.1</span> Added</h3>
<ul>
<li>Add <code>surface_runoff</code> to Basin fluxes. <a href="https://github.com/Deltares/Ribasim/pull/2402">#2402</a></li>
<li>Support NetCDF results. <a href="https://github.com/Deltares/Ribasim/pull/2497">#2497</a></li>
<li>Support NetCDF input. <a href="https://github.com/Deltares/Ribasim/pull/2542">#2542</a></li>
<li>Add multithreading. <a href="https://github.com/Deltares/Ribasim/pull/2562">#2562</a></li>
<li>Implement hysteresis on DiscreteControl. <a href="https://github.com/Deltares/Ribasim/pull/2564">#2564</a></li>
<li>Add <code>FlowBoundary / area</code> polygons. <a href="https://github.com/Deltares/Ribasim/pull/2537">#2537</a></li>
<li>Native multi-objective optimization in allocation. <a href="https://github.com/Deltares/Ribasim/pull/2522">#2522</a></li>
<li>Add control by allocation functionality. <a href="https://github.com/Deltares/Ribasim/pull/2401">#2401</a></li>
<li>FlowDemand supports multiple priorities. <a href="https://github.com/Deltares/Ribasim/pull/2500">#2500</a></li>
<li>Report cause of infeasibility in allocation problems. <a href="https://github.com/Deltares/Ribasim/pull/2398">#2398</a> <a href="https://github.com/Deltares/Ribasim/pull/2481">#2481</a></li>
<li>Add <code>convergence</code> and <code>dt</code> to results for performance monitoring. <a href="https://github.com/Deltares/Ribasim/pull/2405">#2405</a></li>
<li>Warn when reading a new model with an old Ribasim Python version. <a href="https://github.com/Deltares/Ribasim/pull/2410">#2410</a></li>
<li>Add instructions to install using Pixi. <a href="https://github.com/Deltares/Ribasim/pull/2415">#2415</a></li>
<li>Add guide on updating Ribasim models. <a href="https://github.com/Deltares/Ribasim/pull/2489">#2489</a></li>
<li>Support DiscreteControl listening to a Basin’s storage. <a href="https://github.com/Deltares/Ribasim/pull/2573">#2573</a></li>
</ul>
</section>
<section id="changed-2" class="level3" data-number="1.4.2">
<h3 data-number="1.4.2" class="anchored" data-anchor-id="changed-2"><span class="header-section-number">1.4.2</span> Changed</h3>
<ul>
<li>Allow two incoming control links for Pump and Outlet. <a href="https://github.com/Deltares/Ribasim/pull/2531">#2531</a></li>
<li>Use FlowDemand demand as minimum Pump/Outlet flow when allocation is not active. <a href="https://github.com/Deltares/Ribasim/pull/2506">#2506</a></li>
<li>Expand and improve LevelDemand functionality with absolute error handling. <a href="https://github.com/Deltares/Ribasim/pull/2386">#2386</a> <a href="https://github.com/Deltares/Ribasim/pull/2515">#2515</a></li>
<li>Allocation optimization with warm start for better performance. <a href="https://github.com/Deltares/Ribasim/pull/2466">#2466</a></li>
<li>Scale storage and flow in allocation for numerical stability. <a href="https://github.com/Deltares/Ribasim/pull/2407">#2407</a></li>
<li>Switch from UMFPACK to KLU sparse linear solver for performance. <a href="https://github.com/Deltares/Ribasim/pull/2391">#2391</a></li>
<li>Use pandera v0.25, and revert using pyarrow dtypes. <a href="https://github.com/Deltares/Ribasim/pull/2450">#2450</a></li>
<li>QGIS: remove editing features for simplified workflow. <a href="https://github.com/Deltares/Ribasim/pull/2472">#2472</a></li>
<li>Use smooth interpolation of ContinuousControl and TabulatedRatingCurve functions. <a href="https://github.com/Deltares/Ribasim/pull/2446">#2446</a> <a href="https://github.com/Deltares/Ribasim/pull/2458">#2458</a></li>
<li>Use a Reynolds based threshold for the ManningResistance relaxed root <a href="https://github.com/Deltares/Ribasim/pull/2544">2544</a></li>
<li>Demand nodes with timeseries now use block interpolation <a href="https://github.com/Deltares/Ribasim/pull/2568">2568</a></li>
</ul>
</section>
<section id="fixed-2" class="level3" data-number="1.4.3">
<h3 data-number="1.4.3" class="anchored" data-anchor-id="fixed-2"><span class="header-section-number">1.4.3</span> Fixed</h3>
<ul>
<li>Core model initialization speedup. <a href="https://github.com/Deltares/Ribasim/pull/2548">#2548</a> <a href="https://github.com/Deltares/Ribasim/pull/2533">#2533</a></li>
<li>Fix validation error on multiple incoming control links. <a href="https://github.com/Deltares/Ribasim/pull/2535">#2535</a></li>
<li>Improve error message for DiscreteControl with no data. <a href="https://github.com/Deltares/Ribasim/pull/2540">#2540</a></li>
<li>Make convergence finite to avoid numerical issues. <a href="https://github.com/Deltares/Ribasim/pull/2534">#2534</a></li>
<li>Cache FlowDemand lookup to avoid expensive operations in <code>water_balance!</code>. <a href="https://github.com/Deltares/Ribasim/pull/2523">#2523</a></li>
<li>Increase stacksize on Windows to 8 MB to prevent stack overflow. <a href="https://github.com/Deltares/Ribasim/pull/2546">#2546</a></li>
<li>Align timestep allocated and realized results in <code>allocation.arrow</code>. <a href="https://github.com/Deltares/Ribasim/pull/2554">#2554</a></li>
<li>Support GeoPandas 1.1. <a href="https://github.com/Deltares/Ribasim/pull/2547">#2547</a></li>
</ul>
</section>
</section>
<section id="v2025.4.0---2025-06-16" class="level2" data-number="1.5">
<h2 data-number="1.5" class="anchored" data-anchor-id="v2025.4.0---2025-06-16"><span class="header-section-number">1.5</span> [v2025.4.0] - 2025-06-16</h2>
<p>This release had a big push on the stability and performance for large models. Users can now also provide a level-storage relation in Basin / profile. This means old models need to be migrated by reading them into Ribasim Python, and writing them out. We are working on reformulating the allocation problem. Until this work is finished, allocation remains an experimental feature of Ribasim.</p>
<section id="added-3" class="level3" data-number="1.5.1">
<h3 data-number="1.5.1" class="anchored" data-anchor-id="added-3"><span class="header-section-number">1.5.1</span> Added</h3>
<ul>
<li>Reload Ribasim model in QGIS. <a href="https://github.com/Deltares/Ribasim/pull/2307">#2307</a></li>
<li>Support storage column in Basin / profile <a href="https://github.com/Deltares/Ribasim/pull/2278">#2278</a></li>
<li>Allow Junction to Terminal links. <a href="https://github.com/Deltares/Ribasim/pull/2295">#2295</a></li>
<li>Add model performance debugging guide <a href="https://github.com/Deltares/Ribasim/pull/2308">#2308</a></li>
<li>Make FlowBoundary interpolation method configurable <a href="https://github.com/Deltares/Ribasim/pull/2285">#2285</a></li>
<li>Output interpolated Basin / profile in debug mode <a href="https://github.com/Deltares/Ribasim/pull/2344">#2344</a></li>
<li>Write log file via BMI <a href="https://github.com/Deltares/Ribasim/pull/2370">#2370</a></li>
</ul>
</section>
<section id="changed-3" class="level3" data-number="1.5.2">
<h3 data-number="1.5.2" class="anchored" data-anchor-id="changed-3"><span class="header-section-number">1.5.2</span> Changed</h3>
<ul>
<li>Reformulate the allocation problem. <a href="https://github.com/Deltares/Ribasim/pull/2266">#2266</a></li>
<li>Mark allocation as experimental. <a href="https://github.com/Deltares/Ribasim/pull/2266">#2266</a></li>
<li>Low storage threshold based on 10 cm depth <a href="https://github.com/Deltares/Ribasim/pull/2357">#2357</a></li>
<li>Stability: decrease relative tolerance over time. <a href="https://github.com/Deltares/Ribasim/pull/2277">#2277</a></li>
<li>Use block interpolation for FlowBoundary by default <a href="https://github.com/Deltares/Ribasim/pull/2285">#2285</a></li>
<li>Remove backtracking, add more caching <a href="https://github.com/Deltares/Ribasim/pull/2359">#2359</a></li>
<li>More realistic smoothing around <code>Δh = 0</code> in ManningResistance. <a href="https://github.com/Deltares/Ribasim/pull/2365">#2365</a></li>
</ul>
</section>
<section id="fixed-3" class="level3" data-number="1.5.3">
<h3 data-number="1.5.3" class="anchored" data-anchor-id="fixed-3"><span class="header-section-number">1.5.3</span> Fixed</h3>
<ul>
<li>Fix writing results on <code>saveat = 0</code> <a href="https://github.com/Deltares/Ribasim/pull/2305">#2305</a></li>
<li>Fix error in flow limiter <a href="https://github.com/Deltares/Ribasim/pull/2334">#2334</a></li>
<li>Fix cyclic Basin forcing <a href="https://github.com/Deltares/Ribasim/pull/2313">#2313</a></li>
<li>BMI: return 1 on update if solve not successful <a href="https://github.com/Deltares/Ribasim/pull/2341">#2341</a></li>
</ul>
</section>
</section>
<section id="v2025.3.0---2025-04-14" class="level2" data-number="1.6">
<h2 data-number="1.6" class="anchored" data-anchor-id="v2025.3.0---2025-04-14"><span class="header-section-number">1.6</span> [v2025.3.0] - 2025-04-14</h2>
<p>The only breaking change in this release is to disallow connecting a single FlowBoundary to multiple Basins. There are large improvements in the ability to visualize results on the map in QGIS. We also welcome the Junction node to the family, which will help laying out networks in a recognizable manner.</p>
<section id="added-4" class="level3" data-number="1.6.1">
<h3 data-number="1.6.1" class="anchored" data-anchor-id="added-4"><span class="header-section-number">1.6.1</span> Added</h3>
<ul>
<li>Add spatio-temporal results layers to QGIS. <a href="https://github.com/Deltares/Ribasim/pull/2208">#2208</a></li>
<li>Add topological (straight line) link view toggle to QGIS. <a href="https://github.com/Deltares/Ribasim/pull/2208">#2208</a></li>
<li>Added <a href="https://ribasim.org/reference/node/junction.html">Junction</a> node type. <a href="https://github.com/Deltares/Ribasim/pull/2175">#2175</a></li>
<li>Write results and log bottlenecks also on an interrupt or crash. <a href="https://github.com/Deltares/Ribasim/pull/2191">#2191</a> <a href="https://github.com/Deltares/Ribasim/pull/2200">#2200</a></li>
<li>Log computation time and save it to <code>solver_stats.arrow</code>. <a href="https://github.com/Deltares/Ribasim/pull/">#2209</a></li>
<li>Experimental support for writing the model network and results into files used by Delft-FEWS, <a href="`https://ribasim.org/reference/python/Model.html#ribasim.Model.to_fews`"><code>model.to_fews</code></a>. <a href="https://github.com/Deltares/Ribasim/pull/2161">#2161</a></li>
<li>Document <a href="https://ribasim.org/reference/usage.html#concentration---concentration.arrow"><code>results/concentration.arrow</code></a>. <a href="https://github.com/Deltares/Ribasim/pull/2165">#2165</a></li>
</ul>
</section>
<section id="changed-4" class="level3" data-number="1.6.2">
<h3 data-number="1.6.2" class="anchored" data-anchor-id="changed-4"><span class="header-section-number">1.6.2</span> Changed</h3>
<ul>
<li>Allow max 1 outflow neighbour for FlowBoundary. <a href="https://github.com/Deltares/Ribasim/pull/2192">#2192</a></li>
<li>Automatic differentiation is enabled by default again, <code>autodiff = true</code>, leading to better performance. <a href="https://github.com/Deltares/Ribasim/pull/2137">#2137</a> <a href="https://github.com/Deltares/Ribasim/pull/2183">#2183</a></li>
</ul>
</section>
</section>
<section id="v2025.2.0---2025-03-10" class="level2" data-number="1.7">
<h2 data-number="1.7" class="anchored" data-anchor-id="v2025.2.0---2025-03-10"><span class="header-section-number">1.7</span> [v2025.2.0] - 2025-03-10</h2>
<p>In this release, time is of the essence. We now support dynamic Pumps and Outlets, as well as DiscreteControl thresholds. For each node, timeseries can be marked as cyclic, such that yearly recurring timeseries can be easily used without repetition. We also developed tools to compare model input in Python.</p>
<p>The most visible change is the renaming of Edge to Link. Like always, existing models are migrated to the new version by reading them with Ribasim Python, and writing out the updated version. For now in Python <code>model.edge</code> will continue to work to ease the transition.</p>
<section id="added-5" class="level3" data-number="1.7.1">
<h3 data-number="1.7.1" class="anchored" data-anchor-id="added-5"><span class="header-section-number">1.7.1</span> Added</h3>
<ul>
<li>Check Model equality in Python. <a href="https://github.com/Deltares/Ribasim/pull/2057">#2057</a></li>
<li>Compare two models in Python. <a href="https://github.com/Deltares/Ribasim/pull/2080">#2080</a></li>
<li>Support cyclic input timeseries. <a href="https://github.com/Deltares/Ribasim/pull/2081">#2081</a> <a href="https://github.com/Deltares/Ribasim/pull/2102">#2102</a></li>
<li>Time dependent <code>threshold_high</code> thresholds in DiscreteControl. <a href="https://github.com/Deltares/Ribasim/pull/2079">#2079</a></li>
<li>Validation error on connector nodes having the same from and to Basin. <a href="https://github.com/Deltares/Ribasim/pull/2112">#2112</a></li>
<li>Support time dependent Pump and Outlet tables. <a href="https://github.com/Deltares/Ribasim/pull/2110">#2110</a></li>
</ul>
</section>
<section id="changed-5" class="level3" data-number="1.7.2">
<h3 data-number="1.7.2" class="anchored" data-anchor-id="changed-5"><span class="header-section-number">1.7.2</span> Changed</h3>
<ul>
<li>Edges are now called links. <a href="https://github.com/Deltares/Ribasim/pull/2023">#2023</a></li>
<li>All geometries are coerced to 2D. <a href="https://github.com/Deltares/Ribasim/pull/2111">#2111</a></li>
</ul>
</section>
<section id="fixed-4" class="level3" data-number="1.7.3">
<h3 data-number="1.7.3" class="anchored" data-anchor-id="fixed-4"><span class="header-section-number">1.7.3</span> Fixed</h3>
<ul>
<li>Faster initialization of large tables. <a href="https://github.com/Deltares/Ribasim/issues/2026">#2026</a></li>
<li>Declare incompatibility with Pandera v0.23+. <a href="https://github.com/Deltares/Ribasim/issues/2120">#2120</a></li>
<li>Decrease the smoothing around <code>Δh = 0</code> in ManningResistance. <a href="https://github.com/Deltares/Ribasim/issues/2136">#2136</a></li>
</ul>
</section>
</section>
<section id="v2025.1.0---2025-01-17" class="level2" data-number="1.8">
<h2 data-number="1.8" class="anchored" data-anchor-id="v2025.1.0---2025-01-17"><span class="header-section-number">1.8</span> [v2025.1.0] - 2025-01-17</h2>
<p>The first release of 2025 makes the Ribasim core more robust and stable, and speeds up initialization for large models. The biggest new feature is the experimental support for calculating tracers in Ribasim directly, which will hopefully make it easier to track where the water resources are heading.</p>
<section id="added-6" class="level3" data-number="1.8.1">
<h3 data-number="1.8.1" class="anchored" data-anchor-id="added-6"><span class="header-section-number">1.8.1</span> Added</h3>
<ul>
<li>Remove Z coordinate on constructing Node in Python. <a href="https://github.com/Deltares/Ribasim/pull/1986">#1986</a></li>
<li>Add “Basin / subgrid_time” table. <a href="https://github.com/Deltares/Ribasim/pull/1975">#1975</a></li>
<li>Sign Ribasim binaries. <a href="https://github.com/Deltares/Ribasim/pull/2007">#2007</a></li>
<li>Experimental: Calculate tracer concentrations internally. <a href="https://github.com/Deltares/Ribasim/pull/1849">#1849</a></li>
<li>Document <a href="https://ribasim.org/guide/delwaq">parsing Delwaq results</a>. <a href="https://github.com/Deltares/Ribasim/pull/1845">#1845</a></li>
</ul>
</section>
<section id="removed" class="level3" data-number="1.8.2">
<h3 data-number="1.8.2" class="anchored" data-anchor-id="removed"><span class="header-section-number">1.8.2</span> Removed</h3>
<ul>
<li>Drop Python 3.10 support. <a href="https://github.com/Deltares/Ribasim/pull/2012">#2012</a></li>
</ul>
</section>
<section id="changed-6" class="level3" data-number="1.8.3">
<h3 data-number="1.8.3" class="anchored" data-anchor-id="changed-6"><span class="header-section-number">1.8.3</span> Changed</h3>
<ul>
<li>Allocation: optimize per source. <a href="https://github.com/Deltares/Ribasim/pull/1927">#1927</a></li>
<li>The Edge table no longer supports <code>subnetwork_id</code>; this is automatically inferred. <a href="https://github.com/Deltares/Ribasim/pull/1956">#1956</a></li>
</ul>
</section>
<section id="fixed-5" class="level3" data-number="1.8.4">
<h3 data-number="1.8.4" class="anchored" data-anchor-id="fixed-5"><span class="header-section-number">1.8.4</span> Fixed</h3>
<ul>
<li>ManningResistance is more stable around Δh=0. <a href="https://github.com/Deltares/Ribasim/pull/1896">#1896</a></li>
<li>Fixes to Delwaq model generation. <a href="https://github.com/Deltares/Ribasim/pull/1903">#1903</a> <a href="https://github.com/Deltares/Ribasim/pull/1917">#1917</a> <a href="https://github.com/Deltares/Ribasim/pull/1948">#1948</a></li>
<li>Add step limiter to avoid negative flows or too large flows. <a href="https://github.com/Deltares/Ribasim/pull/1911">#1911</a> <a href="https://github.com/Deltares/Ribasim/pull/1912">#1912</a></li>
<li>Fix README.md in builds. <a href="https://github.com/Deltares/Ribasim/pull/1935">#1935</a> <a href="https://github.com/Deltares/Ribasim/pull/1938">#1938</a></li>
<li>Speed up initialization. <a href="https://github.com/Deltares/Ribasim/pull/1977">#1977</a></li>
<li>Automatically name index in Python. <a href="https://github.com/Deltares/Ribasim/pull/1974">#1974</a></li>
<li>Table sorting related fixes. <a href="https://github.com/Deltares/Ribasim/pull/2003">#2003</a></li>
</ul>
</section>
</section>
<section id="v2024.11.0---2024-10-08" class="level2" data-number="1.9">
<h2 data-number="1.9" class="anchored" data-anchor-id="v2024.11.0---2024-10-08"><span class="header-section-number">1.9</span> [v2024.11.0] - 2024-10-08</h2>
<p>This major new release contains many improvements. A new formulation allows much smaller water balance errors, which is combined with several performance improvements. Ribasim Python does more validation that was previously only done in the core. The Ribasim QGIS plugin now sets the relations between tables for easier model inspection. Adding <code>min_upstream_level</code> and <code>max_downstream_level</code> to Pump and Outlet means DiscreteControl is often no longer needed. The most significant breaking change is making the <code>node_id</code> and <code>edge_id</code> the index of the Node and Edge table; these need to be globally unique.</p>
<p>Starting from this release Ribasim is labeled as beta software. Since development is currently mainly driven by applications in the Dutch water system, we expect that addition work needs to be done for general use outside the Netherlands.</p>
<p>For coupled simulation with MODFLOW and/or MetaSWAP, this release is part of the <a href="https://deltares.github.io/iMOD-Documentation/coupler.html">iMOD Coupler</a>, specifically release <a href="https://github.com/Deltares/imod_coupler/releases/tag/v2024.4.0">v2024.4.0</a></p>
<section id="added-7" class="level3" data-number="1.9.1">
<h3 data-number="1.9.1" class="anchored" data-anchor-id="added-7"><span class="header-section-number">1.9.1</span> Added</h3>
<ul>
<li>Support discrete control based on an external concentration condition. <a href="https://github.com/Deltares/Ribasim/pull/1660">#1660</a></li>
<li>Add <code>results/solver_stats.arrow</code> with solver statistics over time. <a href="https://github.com/Deltares/Ribasim/pull/1677">#1677</a></li>
<li>Add icon to <code>ribasim.exe</code> on Windows. <a href="https://github.com/Deltares/Ribasim/pull/1712">#1712</a></li>
<li>Save QGIS styling in the model database. <a href="https://github.com/Deltares/Ribasim/pull/1713">#1713</a></li>
<li>Add Delwaq coupling guide. <a href="https://github.com/Deltares/Ribasim/pull/1619">#1619</a></li>
<li>Solver speedup due to backtracking relaxation. <a href="https://github.com/Deltares/Ribasim/pull/1761">#1761</a></li>
<li>Reject adding a duplicate edge in Python. <a href="https://github.com/Deltares/Ribasim/pull/1719">#1719</a></li>
<li>Support transient UserDemand return factor. <a href="https://github.com/Deltares/Ribasim/pull/1727">#1727</a></li>
<li>Document the interpolation of input data. <a href="https://github.com/Deltares/Ribasim/pull/1720">#1720</a></li>
<li>Automate Jacobian sparsity detection. <a href="https://github.com/Deltares/Ribasim/pull/1606">#1606</a></li>
<li>Support specifying the <code>edge_id</code> as <code>model.edge.add(a, b, edge_id=5)</code>. <a href="https://github.com/Deltares/Ribasim/pull/1737">#1737</a></li>
<li>Use <a href="https://ribasim.org/">https://ribasim.org/</a> to host our documentation. <a href="https://github.com/Deltares/Ribasim/pull/1736">#1736</a></li>
<li>Validate geometry types in Python. <a href="https://github.com/Deltares/Ribasim/pull/1760">#1760</a></li>
<li>Add relationships between tables in QGIS. <a href="https://github.com/Deltares/Ribasim/pull/1755">#1755</a></li>
<li>Support migrating from older Ribasim versions in Python. <a href="https://github.com/Deltares/Ribasim/pull/1764">#1764</a></li>
<li>Add quick start guide to docs. <a href="https://github.com/Deltares/Ribasim/pull/1787">#1787</a></li>
<li>Add <code>min_upstream_level</code> and <code>max_downstream_level</code> to Pump and Outlet. <a href="https://github.com/Deltares/Ribasim/pull/1792">#1792</a></li>
<li>Add <code>max_downstream_level</code> to TabulatedRatingCurve. <a href="https://github.com/Deltares/Ribasim/pull/1795">#1795</a></li>
<li>Validate edge connections in Python. <a href="https://github.com/Deltares/Ribasim/pull/1765">#1765</a></li>
<li>Add low storage reduction factor to ManningResistance. <a href="https://github.com/Deltares/Ribasim/pull/1796">#1796</a></li>
</ul>
</section>
<section id="changed-7" class="level3" data-number="1.9.2">
<h3 data-number="1.9.2" class="anchored" data-anchor-id="changed-7"><span class="header-section-number">1.9.2</span> Changed</h3>
<ul>
<li>Refactor of the core to ensure smaller water balance errors. <a href="https://github.com/Deltares/Ribasim/pull/1819">#1819</a></li>
<li>Make <code>node_id</code> globally unique. <a href="https://github.com/Deltares/Ribasim/pull/1717">#1717</a></li>
<li>Make the Node ID the index of the Node table, and Edge ID for Edge. <a href="https://github.com/Deltares/Ribasim/pull/1737">#1737</a></li>
<li>Make more Python functions private. <a href="https://github.com/Deltares/Ribasim/pull/1702">#1702</a></li>
<li>Put the contents of the CLI zips in a folder. <a href="https://github.com/Deltares/Ribasim/pull/1722">#1722</a></li>
<li>Changed water balance error definition. <a href="https://github.com/Deltares/Ribasim/pull/1767">#1767</a></li>
<li>Disallow missing priority parameter when using allocation. <a href="https://github.com/Deltares/Ribasim/pull/1745">#1745</a></li>
<li>Rename Outlet’s <code>min_crest_level</code> to <code>min_upstream_level</code>. <a href="https://github.com/Deltares/Ribasim/pull/1788">#1788</a></li>
<li>Only allow flow under gravity in TabulatedRatingCurve. <a href="https://github.com/Deltares/Ribasim/pull/1795">#1795</a></li>
<li>Use <code>dtype_backend="pyarrow"</code> for Pandas DataFrames. <a href="https://github.com/Deltares/Ribasim/pull/1781">#1781</a></li>
</ul>
</section>
<section id="fixed-6" class="level3" data-number="1.9.3">
<h3 data-number="1.9.3" class="anchored" data-anchor-id="fixed-6"><span class="header-section-number">1.9.3</span> Fixed</h3>
<ul>
<li>Remove oscillations in ManningResistance. <a href="https://github.com/Deltares/Ribasim/pull/1750">#1750</a></li>
<li>Fix GeoPandas CRS warning. <a href="https://github.com/Deltares/Ribasim/pull/1810">#1810</a></li>
</ul>
</section>
</section>
<section id="v2024.10.0---2024-07-23" class="level2" data-number="1.10">
<h2 data-number="1.10" class="anchored" data-anchor-id="v2024.10.0---2024-07-23"><span class="header-section-number">1.10</span> [v2024.10.0] - 2024-07-23</h2>
<p>For this release we said goodbye to the problematic FractionalFlow node, but welcome the ContinuousControl as a long requested feature.</p>
<section id="added-8" class="level3" data-number="1.10.1">
<h3 data-number="1.10.1" class="anchored" data-anchor-id="added-8"><span class="header-section-number">1.10.1</span> Added</h3>
<ul>
<li>Control: Add ContinuousControl node type. <a href="https://github.com/Deltares/Ribasim/pull/1602">#1602</a></li>
<li>Control: Support listening to flow through connector nodes. <a href="https://github.com/Deltares/Ribasim/pull/1594">#1594</a></li>
<li>Validate that TabulatedRatingCurve levels are above Basin bottom. <a href="https://github.com/Deltares/Ribasim/pull/1607">#1607</a></li>
<li>Validate that Outlet minimum upstream levels are above Basin bottom. <a href="https://github.com/Deltares/Ribasim/pull/1607">#1607</a></li>
<li>Always show convergence bottlenecks. <a href="https://github.com/Deltares/Ribasim/pull/1636">#1636</a></li>
<li>Docstrings for Ribasim Python. <a href="https://github.com/Deltares/Ribasim/pull/1643">#1643</a></li>
<li>Allocate to UserDemand from directly connected Basin if possible. <a href="https://github.com/Deltares/Ribasim/pull/1581">#1581</a></li>
<li>Add <code>basin_state.arrow</code> results. <a href="https://github.com/Deltares/Ribasim/pull/1626">#1626</a></li>
<li>Also write stacktraces to <code>ribasim.log</code>. <a href="https://github.com/Deltares/Ribasim/pull/1653">#1653</a></li>
</ul>
</section>
<section id="changed-8" class="level3" data-number="1.10.2">
<h3 data-number="1.10.2" class="anchored" data-anchor-id="changed-8"><span class="header-section-number">1.10.2</span> Changed</h3>
<ul>
<li>Require QGIS 3.34 (LTR) or newer for Ribasim QGIS plugin.</li>
</ul>
</section>
<section id="fixed-7" class="level3" data-number="1.10.3">
<h3 data-number="1.10.3" class="anchored" data-anchor-id="fixed-7"><span class="header-section-number">1.10.3</span> Fixed</h3>
<ul>
<li>Compatibility with latest NumPy, Pandera and PyArrow releases. <a href="https://github.com/Deltares/Ribasim/pull/1618">#1618</a></li>
<li>LevelDemand can now be without <code>min_level</code> or <code>max_level</code>. <a href="https://github.com/Deltares/Ribasim/pull/1629">#1629</a></li>
</ul>
</section>
<section id="removed-1" class="level3" data-number="1.10.4">
<h3 data-number="1.10.4" class="anchored" data-anchor-id="removed-1"><span class="header-section-number">1.10.4</span> Removed</h3>
<ul>
<li>Removed unused urban runoff variable from Basin. <a href="https://github.com/Deltares/Ribasim/pull/1611">#1611</a></li>
<li>Removed unneeded static table from Terminal. <a href="https://github.com/Deltares/Ribasim/pull/1624">#1624</a></li>
<li>Removed FractionalFlow node. <a href="https://github.com/Deltares/Ribasim/pull/1616">#1616</a></li>
</ul>
</section>
</section>
<section id="v2024.9.0---2024-06-20" class="level2" data-number="1.11">
<h2 data-number="1.11" class="anchored" data-anchor-id="v2024.9.0---2024-06-20"><span class="header-section-number">1.11</span> [v2024.9.0] - 2024-06-20</h2>
<section id="added-9" class="level3" data-number="1.11.1">
<h3 data-number="1.11.1" class="anchored" data-anchor-id="added-9"><span class="header-section-number">1.11.1</span> Added</h3>
<ul>
<li>Support for concentration state and time for Delwaq coupling.</li>
<li>Show exact commit on <code>ribasim --version</code> if it is not a release. <a href="https://github.com/Deltares/Ribasim/pull/1479">#1479</a></li>
</ul>
</section>
<section id="changed-9" class="level3" data-number="1.11.2">
<h3 data-number="1.11.2" class="anchored" data-anchor-id="changed-9"><span class="header-section-number">1.11.2</span> Changed</h3>
<ul>
<li>Optimized performance.</li>
<li>Documentation has been overhauled to be more user-friendly.</li>
<li>Stricter TabulatedRatingCurve validation. <a href="https://github.com/Deltares/Ribasim/pull/1469">#1469</a></li>
<li>Stricter Basin / profile validation. <a href="https://github.com/Deltares/Ribasim/pull/1486">#1486</a></li>
<li>Allocation objective function now gives equal ratios during shortage. <a href="https://github.com/Deltares/Ribasim/pull/1386">#1386</a></li>
</ul>
</section>
<section id="fixed-8" class="level3" data-number="1.11.3">
<h3 data-number="1.11.3" class="anchored" data-anchor-id="fixed-8"><span class="header-section-number">1.11.3</span> Fixed</h3>
<ul>
<li>Don’t require unique node IDs. <a href="https://github.com/Deltares/Ribasim/pull/1513">#1513</a></li>
<li>Fix QGIS crash on plugin initialization. <a href="https://github.com/Deltares/Ribasim/pull/1580">#1580</a></li>
</ul>
</section>
</section>
<section id="v2024.8.0---2024-05-14" class="level2" data-number="1.12">
<h2 data-number="1.12" class="anchored" data-anchor-id="v2024.8.0---2024-05-14"><span class="header-section-number">1.12</span> [v2024.8.0] - 2024-05-14</h2>
<section id="added-10" class="level3" data-number="1.12.1">
<h3 data-number="1.12.1" class="anchored" data-anchor-id="added-10"><span class="header-section-number">1.12.1</span> Added</h3>
<ul>
<li>There is more validation on the edges. <a href="https://github.com/Deltares/Ribasim/pull/1434">#1434</a></li>
<li>If the model does not converge and the used algorithm supports it, we log which Basins don’t converge. <a href="https://github.com/Deltares/Ribasim/pull/1440">#1440</a></li>
</ul>
</section>
<section id="changed-10" class="level3" data-number="1.12.2">
<h3 data-number="1.12.2" class="anchored" data-anchor-id="changed-10"><span class="header-section-number">1.12.2</span> Changed</h3>
<ul>
<li>If negative storages inadvertently happen, we now throw an error. <a href="https://github.com/Deltares/Ribasim/pull/1425">#1425</a></li>
<li>Users of the QGIS plugin need to remove the old version to avoid two copies due to <a href="https://github.com/Deltares/Ribasim/pull/1453">#1453</a>.</li>
</ul>
</section>
<section id="fixed-9" class="level3" data-number="1.12.3">
<h3 data-number="1.12.3" class="anchored" data-anchor-id="fixed-9"><span class="header-section-number">1.12.3</span> Fixed</h3>
<ul>
<li>Performance improvements have been a focus of this release, giving up to 10x faster runs. <a href="https://github.com/Deltares/Ribasim/pull/1433">#1433</a>, <a href="https://github.com/Deltares/Ribasim/pull/1436">#1436</a>, <a href="https://github.com/Deltares/Ribasim/pull/1438">#1438</a>, <a href="https://github.com/Deltares/Ribasim/pull/1448">#1448</a>, <a href="https://github.com/Deltares/Ribasim/pull/1457">#1457</a></li>
<li>The CLI exe is now always in the root of the zip and makes use of the libribasim shared library. <a href="https://github.com/Deltares/Ribasim/pull/1415">#1415</a></li>
</ul>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./index.html" class="pagination-link" aria-label="Ribasim">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Ribasim</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./known_issues.html" class="pagination-link" aria-label="Known issues">
        <span class="nav-page-text">Known issues</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




</body></html>