---
title: "QGIS plugin manual test plan"
---

This document describes how to perform a full manual test on the Ribasim QGIS plugin.
Known shortcomings and issues can be documented [here](/known_issues.qmd).
Bugs can be reported on [GitHub](https://github.com/Deltares/Ribasim/issues).

# Clean slate tests
Before starting with data, perform the following tests to see if the plugin doesn't result in any errors.

## Enable and disable

- Open QGIS and navigate to "Plugins > Manage and Install Plugins...": _The plugin management window opens_.
- Navigate to "Installed": _Ribasim plugin is in the list (enabled)_.
- Disable the Ribasim plugin: _Ribasim plugin panel hides if it was open, Ribasim button hides from navigation toolbar_.
- Enable the Ribasim plugin: _Ribasim button shows on the navigation toolbar_.

# Model tab button interaction tests

## Open model twice

- Open QGIS and ensure that the Ribasim plugin is installed and enabled.
- Click the Ribasim button on the QGIS toolbar: _file navigation window pops up_.
- Choose an existing model from the `generated_testmodels` folder.
- Press OK: _The model layers appear in the layer panel and on the map_.
- Click the Ribasim button on the QGIS toolbar: _file navigation window pops up_.
- Open the same model again: _A new layer group is added to the layers panel_.

Intended behavior: The same model is loaded twice, but there is only a connection on the last loaded model when interacting with the plugin.

# Map interaction tests

## Node selection on map triggers table selection

- Open QGIS and ensure that the Ribasim plugin is installed and enabled.
- Choose an existing model from the `generated_testmodels` folder in the file explorer.
- Drag the TOML file onto QGIS: _The model layers appear in the layer panel and on the map_.
- Select the node layer, and make a subselection of nodes on the map: _Nodes are highlighted in yellow, including their links_.
- Open the Link attribute table: _The highlighted rows are those with a from/to node\_id that was selected_.
- Open any non-spatial attribute table: _The highlighted rows are those with a node\_id that was selected_.

# Result inspection tests

## Run a model from the context menu

- Load the HWS model at `models/hws.toml` (slow enough to observe progress).
- Right-click the model group in the layer panel: _Context menu shows "Run Ribasim model"_.
- Click "Run Ribasim model": _Output dialog opens with title "Ribasim simulation - hws/ribasim"_.
- Wait for simulation: _Progress bar updates in QGIS status bar, output streams to dialog_.
- On completion: _Model reloads with results, Results group contains Flow/Basin layers_.

## Progress bar and task manager

- Start a simulation as above.
- Check QGIS status bar (bottom): _Progress indicator shows percentage_.
- Click the progress indicator: _Task manager panel opens showing the task_.

## Close dialog without terminating

- Start a simulation.
- Close the output dialog (X button) while running: _Dialog closes, simulation continues in background_.
- Check task manager: _Task still running_.

## Cancel simulation

- Start a simulation on `models/hws`.
- Open task manager and cancel the task: _Task is removed from manager_.
- Check output dialog: _Shows "Ribasim simulation - ... was canceled."_.

## Prevent duplicate simulations

- Start a simulation.
- While running, right-click the same model and click "Run Ribasim model": _Warning message "Simulation already running for hws/ribasim"_.
- Load a different model and run it: _Second simulation starts normally_.

# Tutorial tests

## Perform tutorial in documentation

Go through the tutorial as described in the [How-to guide](/guide/qgis.qmd).
